<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="http://d3js.org/d3.v6.js"></script>
    <style>
        :root {

            --Total_color: royalblue;
            /* para os valores totais */

            --Arruamento_color: lightgreen;
            /* para os arruamentos*/

            --autoestrada_color: lightslategrey;
            /* para as autoestradas*/

            --Emunicipal_color: darkorange;
            /* para as estradas municipais*/

            --Enacional_color: orangered;
            /* para as estradas nacionais*/

            --IPIC_color: mediumvioletred;
            /* para as ips e ics*/

            --Outras_color: crimson;
            /* para as outras*/


        }

        #yearFilter {
            position: fixed;
            top: 50%;
            left: 1.5%;
            transform: translate(0, -50%);
            width: 70px;
            height: 400px;
            border: 2px solid black;
        }


        .checkbox-row {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            margin-bottom: 5px;
            margin-left: 10px;
        }

        .checkbox-row .checkbox {
            margin-right: 10px;
        }


        /* para os arruamentos*/
        path.Vligeiros {
            stroke: var(--Arruamento_color);
            stroke-width: 2px;
            fill: none;

        }

        circle.Vligeiros {
            fill: var(--Arruamento_color);
            opacity: 0.6;

        }

        /* para as autoestradas*/
        path.Vpesados {
            stroke: var(--autoestrada_color);
            stroke-width: 2px;
            fill: none;
        }

        circleVpesados {
            fill: var(--autoestrada_color);
            opacity: 0.6;
        }

        /* para as estradas municipais*/
        path.Municipal {
            stroke: var(--Emunicipal_color);
            stroke-width: 2px;
            fill: none;
        }

        circle.Municipal {
            fill: var(--Emunicipal_color);
            opacity: 0.6;
        }


        /* para as estradas nacionais*/
        path.Nacional {
            stroke: var(--Enacional_color);
            stroke-width: 2px;
            fill: none;
        }

        circle.Nacional {
            fill: var(--Enacional_color);
            opacity: 0.6;
        }

        /* para as ips e ics*/
        path.IPIC {
            stroke: var(--IPIC_color);
            stroke-width: 2px;
            fill: none;
        }

        circle.IPIC {
            fill: var(--IPIC_color);
            opacity: 0.6;
        }

        /* para as outras*/
        path.Outras_vias {
            stroke: var(--Outras_color);
            stroke-width: 2px;
            fill: none;
        }

        circle.Outras_vias {
            fill: var(--Outras_color);
            opacity: 0.6;
        }


        .pie-chart {
            position: absolute;
            right: 70px;
            /* Ajuste a posição conforme necessário */
            top: 150px;
            /* Ajuste a posição conforme necessário */
        }

        .svg-container {
            display: block;
            margin: auto;
        }


        /* Add a black background color to the top navigation */
        .topnav {
            background-color: #333;
            overflow: hidden;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2);
        }

        .topnav a,
        .topnav h1 {
            color: #f2f2f2;
            text-decoration: none;
            font-size: 17px;
            padding: 14px 16px;
            margin: 0;
            /* Reset default margins */
            text-align: center;
        }

        /* Change the color of links on hover */
        .topnav a:hover {
            background-color: #ddd;
            color: black;
        }

        /* Add a color to the active/current link */
        .topnav a.active {
            background-color: #04AA6D;
            color: white;
        }
    </style>
</head>

<body>
    <div class="topnav">
        <a class="active" href="#home">Home</a>
        <h1>Acidentes por tipo de veiculo</h1>
        <a href="/acidentes-por-via" class="active">Acidentes por tipo de via</a>
        <a href="/acidentes-por-veiculo" class="active">Acidentes por tipo de veiculo</a>
    </div>


    <div id="yearFilter"></div>


    <button id="TotalorOthersButton">change between total and all others </button>
    <script>

        async function fetchTopoJSONData(filePath) {
            try {
                const response = await fetch(filePath);
        
                if (!response.ok) {
                    throw new Error(`Failed to fetch TopoJSON (${response.status} ${response.statusText})`);
                }
        
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('Error fetching or parsing TopoJSON data:', error.message);
                throw error;
            }
        }
        
        // Initial data load and visualization
        fetchTopoJSONData("VisTP1/Portugal-Distritos-Ilhas_TopoJSON.json")
            .then(draw)
            .catch(function (err) {
                console.log(err);
            });
       

        // Initial data load and visualization
        fetchJSONData("/VisTP1/Portugal-Distritos-Ilhas_TopoJSON.json")
            .then(draw)
            .catch(function (err) {
                console.log(err);
            });

        const yearFilter = document.getElementById("yearFilter");
        const years = [2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022];

        // ... (Your existing code for creating checkboxes)

        // com base no exemplo 3.2 de as aulas.
        let width = 1800;
        let height = 1080;
        let margin = 100;


        
        function draw(data) {
            // Assuming data is the TopoJSON object
            // Extract features from the TopoJSON object
            const features = topojson.feature(data, data.objects.YOUR_OBJECT_NAME).features;
        
            // Do something with the features (e.g., draw_map(features))
            draw_map(features);
        }
        
        function draw_map(features) {
            console.log(features);
        
            // Vis Code
            let margin = 75,
                width = 1400 - margin,
                height = 600 - margin;
        
            let svg = d3.select("body").append("svg")
                .attr("width", width + margin)
                .attr("height", height + margin)
                .append('g')
                .attr('class', 'map');
        
            let projection = d3.geoMercator();
            let path = d3.geoPath().projection(projection);
        
            svg.append("g")
                .attr('class', 'map')
                .selectAll("path")
                .data(features)
                .enter().append("path")
                .attr("d", path);
        }        



    </script>

</body>

</html>
<link rel="stylesheet" href="Tipo_Via_Style.css">